# include <stdio.h>

unsigned char ram[0x10000];
int PC = 0;
int A,B,C,D,E,H,L;


void main(int argc, char *argv[]){
if (argc < 2) {
        printf("usage: sim80 file.bin\n");
        return;
    }

    FILE *fp = fopen(argv[1], "rb");
    if (!fp) {
        printf("cannot open file: %s\n", argv[1]);
        return;
    }

    size_t size = fread(ram, 1, 0x10000, fp);
    fclose(fp);

    printf("loaded %zu bytes\n", size);

    while(1){
    switch (ram[PC++]){
        case 0x3e: //LD A,nn
        A = ram[PC++];
        break;
        case 0x76: //HALT
        return;
    }
    }
return;
}
